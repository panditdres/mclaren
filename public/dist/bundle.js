"use strict";!function(){angular.module("McLarenApp",["ui.router","ui.bootstrap","ngStorage","angular-loading-bar","ngMessages","ngFileSaver","ngToast","chart.js"]).config(["$logProvider","$compileProvider","$urlRouterProvider","$locationProvider","cfpLoadingBarProvider",function(e,t,a,n,o){a.otherwise("/"),e.debugEnabled(!1),n.html5Mode(!0),o.includeSpinner=!1,t.debugInfoEnabled(!1)}]).controller("AppCtrl",["$scope","$localStorage","$location","$sessionStorage",function(e,t,a,n){var o=a.search().SessionID;o&&(t.token=o),n.$reset(),e.$on("$stateChangeSuccess",function(t,a,n,o,r){angular.isDefined(a.data.pageTitle)&&(e.pageTitle=a.data.pageTitle+" | McLaren")})}])}(),function(){function e(e,t,a,n){function o(){return e.get(i+"allPatients").then(function(e){return l=e.data.data,e.data}).catch(function(e){console.log(e)})}function r(){return e.get(i+"allDefinitions").then(function(e){return e.data}).catch(function(e){console.log(e)})}var i="/api/v1/",l=[];return{getAllPatients:o,getAllDefinitions:r,patients:function(){return l}}}e.$inject=["$http","$q","$localStorage","ngToast"],angular.module("McLarenApp").factory("DataService",e)}(),angular.module("McLarenApp").controller("ModalCtrl",["$scope","$uibModalInstance","DataService","ngToast",function(e,t,a,n){e.modal=t,function(){console.log("Modal created")}()}]),function(){angular.module("McLarenApp").config(["$stateProvider",function(e){e.state("home.grid",{url:"/",controller:"GridCtrl as vm",templateUrl:"app/grid/grid.html",data:{pageTitle:"Dashboard"}})}]).controller("GridCtrl",["$scope","$state","$uibModal","$filter","$rootScope","DataService",function(e,t,a,n,o,r){function i(){if(c.patients){var e=n("filter")(l(c.patients),c.search),t=e.filter(function(e,t){return t>=c.pplPerPage*(c.pageNum-1)&&t<c.pageNum*c.pplPerPage});return c.pageLen=e.length,t}}function l(e){var t=e.map(function(e,t){return{index:t,value:e[c.sortCol]}});return t.sort(function(e,t){return e.value>t.value?c.sortReverse?-1:1:e.value<t.value?c.sortReverse?1:-1:0}),t.map(function(t){return e[t.index]})}function s(e){console.log("view patient",e);var t={templateUrl:"app/templates/modal.html",size:"lg",controller:"ModalCtrl as vm"};a.open(t).result.then(function(e){},function(){console.log("Modal dismissed")})}var c=this;c.search="",c.sortCol="name",c.checkboxAll=!1,c.pageNum=1,c.sortReverse=!1,c.pplPerPage=10,c.pagePatients=i,c.viewPatient=s,c.gridColumns=[{display:"Name",search:"name",sort:"name",rotate:"name"},{display:"BMI",search:"bmi",sort:"bmi",rotate:"bmi"},{display:"Height (cm)",search:"heightCm",sort:"heightCm",rotate:"heightCm"},{display:"Weight (kg)",search:"weightKg",sort:"weightKg",rotate:"weightKg"},{display:"Meets recommended level",search:"meetsBool",sort:"meetsBool"},{display:"Created",search:"Created",sort:"Created",rotate:"Created"}],function(){c.patients=r.patients(),console.log(c.patients,"patient on grid")}()}])}(),function(){angular.module("McLarenApp").config(["$stateProvider",function(e){e.state("home",{controller:"HomeCtrl as vm",templateUrl:"app/home/home.html",data:{pageTitle:"Dashboard"},resolve:{allPatients:["DataService",function(e){return e.getAllPatients().then(function(e){return console.log(e.data),e.data})}]}})}]).controller("HomeCtrl",["$scope","$localStorage","$state","DataService","allPatients",function(e,t,a,n,o){var r=this;r.selectingCover=!0,function(){r.patients=o}()}])}();